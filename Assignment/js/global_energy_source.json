{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Global Energy Substitution versus Time",
    "subtitle": "To see get exact values, hover over the area. Choose a source is legend to filter out others.",
    "subtitleColor": "gray",
    "fontSize": 20,
    "fontWeight": "bold"
  },
  "width": "container",
  "height": 400,
  "data": {
    "url": "https://raw.githubusercontent.com/JDan0036/FIT3179/refs/heads/main/FIT3179%20Homework%2010/Dataset/global-energy-substitution.csv"
  },
  "transform": [
    {
      "fold": [
        "Other renewables (TWh, substituted energy)",
        "Biofuels (TWh, substituted energy)",
        "Solar (TWh, substituted energy)",
        "Wind (TWh, substituted energy)",
        "Hydropower (TWh, substituted energy)",
        "Nuclear (TWh, substituted energy)",
        "Gas (TWh, substituted energy)",
        "Oil (TWh, substituted energy)",
        "Coal (TWh, substituted energy)",
        "Traditional biomass (TWh, substituted energy)"
      ],
      "as": ["Energy Source", "Substituted Energy (TWh)"]
    },
    {
      "calculate": "replace(datum['Energy Source'], ' (TWh, substituted energy)', '')",
      "as": "Cleaned Energy Source"
    }
  ],
  "layer": [
    {
      "mark": "area",
      "selection": {
        "energySource": {
          "type": "multi",
          "fields": ["Cleaned Energy Source"],
          "bind": "legend"
        }
      },
      "encoding": {
        "x": {
          "field": "Year",
          "type": "temporal",
          "axis": {
            "format": "%Y"
          }
        },
        "y": {
          "aggregate": "sum",
          "field": "Substituted Energy (TWh)",
          "type": "quantitative",
          "title": "Substituted Energy (TWh)"
        },
        "color": {
          "field": "Cleaned Energy Source",
          "type": "nominal",
          "scale": {
            "scheme": "dark2"
          },
          "legend": {
            "orient": "bottom",
            "columns": 5 
          }
        },
        "opacity": {
          "condition": {
            "selection": "energySource",
            "value": 1
          },
          "value": 0.2
        },
        "tooltip": [
          {
            "field": "Year",
            "type": "temporal",
            "title": "Year",
            "timeUnit": "year"
          },
          {
            "field": "Cleaned Energy Source",
            "type": "nominal",
            "title": "Energy Source"
          },
          {
            "field": "Substituted Energy (TWh)",
            "type": "quantitative",
            "title": "Substituted Energy (TWh)",
            "format": ",.2f"
          }
        ]
      }
    },
    {
      "mark": "rule",
      "encoding": {
        "x": {
          "datum": {"year": 1900}, 
          "type": "temporal"
        }
      }
    },
    {
      "mark": "rule",
      "encoding": {
        "x": {
          "datum": {"year": 1960}, 
          "type": "temporal"
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 100,
        "dy": 0,
        "fontSize": 15
      },
      "encoding": {
        "x": {
          "datum": "1890-01-01",
          "type": "temporal"
        },
        "y": {
          "datum": 100000,
          "type": "quantitative"
        },
        "text": {
          "value": "Traditional Biomass"
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 100,
        "dy": 0,
        "fontSize": 15
      },
      "encoding": {
        "x": {
          "datum": "1890-01-01",
          "type": "temporal"
        },
        "y": {
          "datum": 90000,
          "type": "quantitative"
        },
        "text": {
          "value": "Dominance (Pre-1900)"
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 295,
        "dy": 0,
        "fontSize": 15
      },
      "encoding": {
        "x": {
          "datum": "2000-01-01",
          "type": "temporal"
        },
        "y": {
          "datum": 150000,
          "type": "quantitative"
        },
        "text": {
          "value": "Industrialization"
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 295,
        "dy": 0,
        "fontSize": 15
      },
      "encoding": {
        "x": {
          "datum": "1890-01-01",
          "type": "temporal"
        },
        "y": {
          "datum": 140000,
          "type": "quantitative"
        },
        "text": {
          "value": "(1900-1960)"
        }
      }
    },
    {
      "mark": {
      "type": "text",
      "align": "center",
      "dx": 430,
      "dy": 0,
      "fontSize": 15
      },
      "encoding": {
        "x": {
          "datum": "2000-01-01",
          "type": "temporal"
        },
        "y": {
          "datum": 195000,
          "type": "quantitative"
        },
        "text": {
          "value": "Modern Energy"
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 430,
        "dy": 0,
        "fontSize": 15
      },
      "encoding": {
        "x": {
          "datum": "1890-01-01",
          "type": "temporal"
        },
        "y": {
          "datum": 185000,
          "type": "quantitative"
        },
        "text": {
          "value": "Mix (Post-1960)"
        }
      }
    }
  ],
  "config": {
    "style": {"cell": {"stroke": "transparent"}}
  }
}
